{"version":3,"file":"static/js/867.a8eb5f59.chunk.js","mappings":"mLAMA,MAAMA,EAAM,IAAIC,EAAAA,GAAU,CAAEC,GAAIC,sBAuHhC,EArHeC,IACb,MAAOC,EAAGC,IAAQC,EAAAA,EAAAA,WAAS,IACpBC,EAAOC,IAAYF,EAAAA,EAAAA,UAAS,KAC5BG,EAAWC,IAAgBJ,EAAAA,EAAAA,WAAS,GAWrCK,EAAW,CACf,yBAA0B,CACxB,MAAS,CACP,SAAYF,GAEd,UAAY,EACZ,WAAc,6BAiDlB,OACEG,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oBAAmBC,UAChCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,CACxBL,IAAaG,EAAAA,EAAAA,KAAA,OAAKC,UAAU,UAASC,SAAC,eACtCV,GACCW,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAAF,SAAA,EACEF,EAAAA,EAAAA,KAACK,EAAAA,GAAI,CACHC,OAvEG,CACbC,KAAM,SACNC,SAAU,CAAC,QAAS,YACpBC,WAAY,CACVd,MAAO,CAAEY,KAAM,SAAUG,MAAO,mCAChCC,SAAU,CAAEJ,KAAM,SAAUG,MAAO,qBAAYE,OAAQ,cAmE/CC,UAAWA,EAAAA,GACXd,SAAUA,EACVe,SAvDKC,UAAyB,IAAlB,SAAEC,GAAUC,EAClCnB,GAAa,GACb,MAAM,MAAEH,EAAK,SAAEgB,GAAaK,EACtBE,EAAc9B,EAAAA,GAAkB+B,cAAcxB,EAAOgB,GAE3D,IAAK,IAADS,EAEF,GAA8B,WAAX,QAAfA,SADejC,EAAIkC,MAAMH,IACpBI,kBAAU,IAAAF,OAAA,EAAfA,EAAiBb,MACnBgB,OAAOC,SAASC,KAAO,wBAEvB,IACGlC,EAAMmC,YAAY,QAGjBC,YAAW,KACTJ,OAAOC,SAASI,QAAQ,GACvB,EAEP,CAAE,MAAOC,GACPC,QAAQC,IAAIF,EAAMA,MACpB,CAIJ,CAAE,MAAOA,GACPC,QAAQC,IAAIF,EACd,CAAC,QACC/B,GAAa,EACf,GA4BUkC,SAAUnC,KAEZM,EAAAA,EAAAA,MAAA,OAAKF,UAAU,2CAA0CC,SAAA,EACvDF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,OAAMC,SAAC,iCACpBF,EAAAA,EAAAA,KAAA,KACEC,UAAU,mEACVgC,QAASA,IAAMxC,GAAK,GAAOS,SAC5B,wDAIHF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wEAAwEgC,QAASA,IAAM1C,EAAMmC,YAAY,YAAYxB,SAAC,+CAGrIC,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAAF,SAAA,EACEF,EAAAA,EAAAA,KAAA,OAAAE,UACEC,EAAAA,EAAAA,MAAA,QAAMW,SAzCGC,UACnBmB,EAAMC,iBACNrC,GAAa,GAEb,UACQX,EAAIiD,kBAAkBC,uBAAuB,CAAE1C,UACrD2C,MAAM,wFACR,CAAE,MAAOT,GACPC,QAAQC,IAAIF,EACd,CAAC,QACC/B,GAAa,EACf,GA8BuCI,SAAA,EAC3BC,EAAAA,EAAAA,MAAA,SAAAD,SAAA,CAAO,UAELF,EAAAA,EAAAA,KAAA,SACEO,KAAK,QACLgC,MAAO5C,EACP6C,SAAWN,GAAUtC,EAASsC,EAAMO,OAAOF,OAC3CP,SAAUnC,QAGdG,EAAAA,EAAAA,KAAA,UAAQO,KAAK,SAASyB,SAAUnC,EAAUK,SAAC,iBAG/CF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,yEAAyEgC,QAASA,IAAMxC,GAAK,GAAMS,SAAC,sDAInH,C","sources":["routers/main/login/login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Form from '@rjsf/core';\r\nimport validator from '@rjsf/validator-ajv8';\r\nimport * as Realm from 'realm-web';\r\nimport './Login.css'; // Import CSS file\r\n\r\nconst app = new Realm.App({ id: process.env.REACT_APP_REALM_ID });\r\n\r\nconst Login = (props) => {\r\n  const [e, setE] = useState(true);\r\n  const [email, setEmail] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const schema = {\r\n    type: 'object',\r\n    required: ['email', 'password'],\r\n    properties: {\r\n      email: { type: 'string', title: 'Tên đăng nhập' },\r\n      password: { type: 'string', title: 'Mật khẩu', format: 'password' }\r\n    }\r\n  };\r\n\r\n  const uiSchema = {\r\n    \"ui:submitButtonOptions\": {\r\n      \"props\": {\r\n        \"disabled\": isLoading, // Disable submit button when loading\r\n      },\r\n      \"norender\": false,\r\n      \"submitText\": \"Đăng nhập\",\r\n    }\r\n  };\r\n\r\n  const onSubmit = async ({ formData }) => {\r\n    setIsLoading(true);\r\n    const { email, password } = formData;\r\n    const credentials = Realm.Credentials.emailPassword(email, password);\r\n    \r\n    try {\r\n      const user = await app.logIn(credentials);\r\n      if (user.customData?.type === \"Admin\") {\r\n        window.location.href = \"/greencard/admin\";\r\n      } else {\r\n        try {\r\n           props.setNavigate(\"home\"); // Đợi hàm này hoàn thành\r\n  \r\n         \r\n            setTimeout(() => {\r\n              window.location.reload()\r\n            }, 1);\r\n        \r\n        } catch (error) {\r\n          console.log(error.error)\r\n        }\r\n\r\n        \r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      await app.emailPasswordAuth.sendResetPasswordEmail({ email });\r\n      alert(\"Đã gửi email đặt lại mật khẩu thành công!\");\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='container-wrapper'>\r\n      <div className=\"containers\">\r\n        {isLoading && <div className=\"spinner\">Loading...</div>}\r\n        {e ? (\r\n          <>\r\n            <Form\r\n              schema={schema}\r\n              validator={validator}\r\n              uiSchema={uiSchema}\r\n              onSubmit={onSubmit}\r\n              disabled={isLoading}\r\n            />\r\n            <div className=\"ml-5 mt-4 flex items-center justify-cent\">\r\n              <p className=\"mr-2\">Quên mật khẩu?</p>\r\n              <p\r\n                className=\"text-blue-500 cursor-pointer hover:text-blue-700 hover:underline\"\r\n                onClick={() => setE(false)}\r\n              >\r\n                Đặt lại mật khẩu ngay!\r\n              </p>\r\n            </div>\r\n            <p className='text-blue-500 mt-2 cursor-pointer hover:text-blue-700 hover:underline' onClick={() => props.setNavigate('register')}>Đăng ký tài khoản</p>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <div>\r\n              <form onSubmit={handleSubmit}>\r\n                <label>\r\n                  Email:\r\n                  <input\r\n                    type=\"email\"\r\n                    value={email}\r\n                    onChange={(event) => setEmail(event.target.value)}\r\n                    disabled={isLoading}\r\n                  />\r\n                </label>\r\n                <button type=\"submit\" disabled={isLoading}>Submit</button>\r\n              </form>\r\n            </div>\r\n            <p className='text-blue-500 mt-4  cursor-pointer hover:text-blue-700 hover:underline' onClick={() => setE(true)}>Trở lại đăng nhập</p>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"names":["app","Realm","id","process","props","e","setE","useState","email","setEmail","isLoading","setIsLoading","uiSchema","_jsx","className","children","_jsxs","_Fragment","Form","schema","type","required","properties","title","password","format","validator","onSubmit","async","formData","_ref","credentials","emailPassword","_user$customData","logIn","customData","window","location","href","setNavigate","setTimeout","reload","error","console","log","disabled","onClick","event","preventDefault","emailPasswordAuth","sendResetPasswordEmail","alert","value","onChange","target"],"sourceRoot":""}